pipeline {
  agent any
  
  environment {
    AWS_REGION = 'ap-south-1'
  }
  
  stages {
    stage('Checkout') {
      steps {
        script {
          def workspace = params.ENVIRONMENT
          dir("/var/lib/jenkins/workspace/workspace-terraform/${workspace}") {
            sh "ls -lart" // Added for debugging
            sh "pwd" // Added for debugging
            
            checkout([
              $class: 'GitSCM',
              branches: [[name: '*/main']],
              userRemoteConfigs: [[url: 'https://github.com/saimanohar9966/terraform-workspace.git']]
            ])
          }
        }
      }
    }

    // Add your remaining stages here
  }
}
